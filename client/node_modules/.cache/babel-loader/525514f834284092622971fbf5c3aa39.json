{"ast":null,"code":"var _jsxFileName = \"/Users/aidanhall/Desktop/nsft/client/src/screens/UploadDetails/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport cn from \"classnames\";\nimport styles from \"./UploadDetails.module.sass\";\nimport Icon from \"../../components/Icon\";\nimport TextInput from \"../../components/TextInput\"; //import Switch from \"../../components/Switch\";\n\nimport Modal from \"../../components/Modal\";\nimport Preview from \"./Preview\";\nimport FolowSteps from \"./FolowSteps\";\nimport { NFTStorage } from \"nft.storage\";\nimport CryptoJs from 'crypto-js';\nimport { useUser } from \"../../providers/UserProvider\";\nimport { useLocation } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport image from './nsft-logo.jpeg'; //const royaltiesOptions = [\"10%\", \"20%\", \"30%\"];\n\n/*\nconst items = [\n  {\n    title: \"Create collection\",\n    color: \"#4BC9F0\",\n  },\n  {\n    title: \"Crypto Legend - Professor\",\n    color: \"#45B26B\",\n  },\n  {\n    title: \"Crypto Legend - Professor\",\n    color: \"#EF466F\",\n  },\n  {\n    title: \"Legend Photography\",\n    color: \"#9757D7\",\n  },\n];\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst apikey = process.env.REACT_APP_NFT_STORAGE_KEY;\n\nconst encrypt = text => {\n  return CryptoJs.enc.Base64.stringify(CryptoJs.enc.Utf8.parse(text));\n};\n\nconst Upload = () => {\n  _s();\n\n  //const [royalties, setRoyalties] = useState(royaltiesOptions[0]);\n  //const [sale, setSale] = useState(true);\n  //const [price, setPrice] = useState(false);\n  //const [locking, setLocking] = useState(false);\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [visiblePreview, setVisiblePreview] = useState(false);\n  const [name, setName] = useState('');\n  const [desc, setDesc] = useState('');\n  const [count, setCount] = useState(1);\n  const [preview, setPreview] = useState();\n  const [previewType, setPreviewType] = useState('');\n  const [file, setFile] = useState();\n  const [success, setSuccess] = useState(false);\n  const [verified, setVerified] = useState(false);\n  const [fileCheck, setFileCheck] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [validate, setValidate] = useState(false);\n  const {\n    mintNsft,\n    collection,\n    fetchUserMintedNsfts,\n    user\n  } = useUser();\n  const location = useLocation();\n  const client = new NFTStorage({\n    token: apikey\n  });\n\n  const handleNameChange = async e => {\n    setName(e);\n  };\n\n  const handleDescriptionChange = async e => {\n    setDesc(e);\n  };\n\n  const handleCountChange = async e => {\n    setValidate(false);\n    setCount(e);\n  };\n\n  const handleFileInput = async e => {\n    setFileCheck(false);\n    console.log(e.target.files[0]);\n    let file = e.target.files[0];\n    let reader = new FileReader();\n    reader.readAsArrayBuffer(file);\n    console.log(reader);\n    setPreview(URL.createObjectURL(e.target.files[0]));\n    setFile(e.target.files[0]);\n    setPreviewType(e.target.files[0].type.split('/')[0]);\n  }; // Test videos\n\n\n  const handleSubmit = async e => {\n    if (!collection) {\n      setVerified(true);\n      return;\n    }\n\n    if (!file) {\n      setFileCheck(true);\n      return;\n    }\n\n    if (count > 10 || count < 0) {\n      setValidate(true);\n      return;\n    }\n\n    setLoading(true);\n    setVisibleModal(true); //const files = e.nativeEvent[\"target\"][\"form\"][0].files[0]\n\n    const filetype = file[\"type\"].split(\"/\")[0];\n    let type;\n\n    if (filetype === 'image') {\n      type = 0;\n    } else if (filetype === 'video') {\n      type = 1;\n    } else {\n      type = 2;\n    }\n\n    const stockImage = new File([image], \"image.jpeg\", {\n      type: \"image/jpeg\"\n    });\n    let metadata;\n\n    try {\n      metadata = await client.store({\n        name: name,\n        description: desc,\n        image: stockImage,\n        properties: {\n          file: file\n        }\n      });\n    } catch (err) {\n      console.log(err);\n      setLoading(false);\n      setError(true);\n    }\n\n    let hash = metadata.url;\n    hash = encrypt(metadata.url); //eslint-disable-next-line\n\n    const tx = await mintNsft(hash, type, name, desc, parseInt(count)).then(response => {\n      setSuccess(true);\n      setLoading(false);\n      console.log(response);\n      fetchUserMintedNsfts();\n    }).catch(err => {\n      setError(true);\n      setLoading(false);\n      setSuccess(false);\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn(\"section\", styles.section),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(\"container\", styles.container),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.wrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.head,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: cn(\"h2\", styles.title),\n              children: location.pathname.split(\"/\")[1] === 'upload-single' ? 'Create a collectible' : 'Create multiple collectibles'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              className: styles.button,\n              to: location.pathname.split(\"/\")[1] === 'upload-single' ? '/upload-multiple' : '/upload-single',\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: cn(\"button-stroke button-small\", styles.button),\n                children: location.pathname.split(\"/\")[1] === 'upload-single' ? 'Switch to Multiple' : 'Switch to Single'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: styles.form,\n            action: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.list,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.category,\n                  children: \"Upload file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.note,\n                  children: \"Drag or choose your file to upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.file,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: styles.load,\n                    type: \"file\",\n                    accept: \"image/*,video/*\",\n                    onChange: handleFileInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.icon,\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      name: \"upload-file\",\n                      size: \"24\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.format,\n                    children: \"Image and Video files accepted. Max 32Gb.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.category,\n                  children: \"NSFT Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.fieldset,\n                  children: [/*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"Title\",\n                    name: \"NSFT\",\n                    type: \"text\",\n                    required: true,\n                    onChange: e => handleNameChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"Description\",\n                    name: \"Description\",\n                    type: \"text\",\n                    placeholder: \"\",\n                    required: true,\n                    onChange: e => handleDescriptionChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this), location.pathname.split(\"/\")[1] === 'upload-multiple' && /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"Count\",\n                    name: \"Count\",\n                    type: \"number\",\n                    value: count,\n                    placeholder: \"\",\n                    step: 1,\n                    min: 1,\n                    max: 10,\n                    required: true,\n                    onChange: e => handleCountChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.foot,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: cn(\"button-stroke tablet-show\", styles.button),\n                onClick: () => setVisiblePreview(true),\n                type: \"button\",\n                children: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: cn(\"button\", styles.button),\n                onClick: e => {\n                  handleSubmit(e);\n                } // type=\"button\" hide after form customization\n                ,\n                type: \"button\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Create item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"arrow-next\",\n                  size: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this), verified && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"You must verify your account before you can mint\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 31\n              }, this), fileCheck && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Please upload content before continuing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 32\n              }, this), validate && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"Count must be a number between 1 and 10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Preview, {\n          className: cn(styles.preview, {\n            [styles.active]: visiblePreview\n          }),\n          onClose: () => setVisiblePreview(false),\n          obj: {\n            file: preview,\n            type: previewType,\n            name: name,\n            desc: desc,\n            count: count\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: visibleModal,\n      onClose: () => setVisibleModal(false),\n      children: /*#__PURE__*/_jsxDEV(FolowSteps, {\n        className: styles.steps,\n        obj: {\n          loading: loading,\n          error: error,\n          success: success\n        },\n        onClose: () => setVisibleModal(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Upload, \"7YgAfRB6JuY7OJzfOe1BrbilJjM=\", false, function () {\n  return [useUser, useLocation];\n});\n\n_c = Upload;\nexport default Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["/Users/aidanhall/Desktop/nsft/client/src/screens/UploadDetails/index.js"],"names":["React","useState","cn","styles","Icon","TextInput","Modal","Preview","FolowSteps","NFTStorage","CryptoJs","useUser","useLocation","Link","image","apikey","process","env","REACT_APP_NFT_STORAGE_KEY","encrypt","text","enc","Base64","stringify","Utf8","parse","Upload","visibleModal","setVisibleModal","visiblePreview","setVisiblePreview","name","setName","desc","setDesc","count","setCount","preview","setPreview","previewType","setPreviewType","file","setFile","success","setSuccess","verified","setVerified","fileCheck","setFileCheck","loading","setLoading","error","setError","validate","setValidate","mintNsft","collection","fetchUserMintedNsfts","user","location","client","token","handleNameChange","e","handleDescriptionChange","handleCountChange","handleFileInput","console","log","target","files","reader","FileReader","readAsArrayBuffer","URL","createObjectURL","type","split","handleSubmit","filetype","stockImage","File","metadata","store","description","properties","err","hash","url","tx","parseInt","then","response","catch","section","container","wrapper","head","title","pathname","button","form","list","item","category","note","load","icon","format","fieldset","field","currentTarget","value","foot","active","steps"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport cn from \"classnames\";\nimport styles from \"./UploadDetails.module.sass\";\nimport Icon from \"../../components/Icon\";\nimport TextInput from \"../../components/TextInput\";\n//import Switch from \"../../components/Switch\";\nimport Modal from \"../../components/Modal\";\nimport Preview from \"./Preview\";\nimport FolowSteps from \"./FolowSteps\";\nimport { NFTStorage } from \"nft.storage\"\nimport CryptoJs from 'crypto-js'\nimport { useUser } from \"../../providers/UserProvider\";\nimport { useLocation } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport image from './nsft-logo.jpeg';\n\n//const royaltiesOptions = [\"10%\", \"20%\", \"30%\"];\n/*\nconst items = [\n  {\n    title: \"Create collection\",\n    color: \"#4BC9F0\",\n  },\n  {\n    title: \"Crypto Legend - Professor\",\n    color: \"#45B26B\",\n  },\n  {\n    title: \"Crypto Legend - Professor\",\n    color: \"#EF466F\",\n  },\n  {\n    title: \"Legend Photography\",\n    color: \"#9757D7\",\n  },\n];\n*/\n\nconst apikey = process.env.REACT_APP_NFT_STORAGE_KEY\n\nconst encrypt = (text) => {\n  return CryptoJs.enc.Base64.stringify(CryptoJs.enc.Utf8.parse(text))\n}\n\nconst Upload = () => {\n  //const [royalties, setRoyalties] = useState(royaltiesOptions[0]);\n  //const [sale, setSale] = useState(true);\n  //const [price, setPrice] = useState(false);\n  //const [locking, setLocking] = useState(false);\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [visiblePreview, setVisiblePreview] = useState(false);\n  const [name, setName] = useState('')\n  const [desc, setDesc] = useState('')\n  const [count, setCount] = useState(1)\n  const [preview, setPreview] = useState()\n  const [previewType, setPreviewType] = useState('')\n  const [file, setFile] = useState()\n  const [success, setSuccess] = useState(false)\n  const [verified, setVerified] = useState(false)\n  const [fileCheck, setFileCheck] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [validate, setValidate] = useState(false)\n\n  const { mintNsft, collection, fetchUserMintedNsfts, user } = useUser()\n\n  const location = useLocation()\n\n  const client = new NFTStorage({ token: apikey })\n\n  const handleNameChange = async (e) => {\n    setName(e)\n  }\n\n  const handleDescriptionChange = async (e) => {\n    setDesc(e)\n  }\n\n  const handleCountChange = async (e) => {\n    setValidate(false)\n    setCount(e)\n  }\n\n  const handleFileInput = async (e) => {\n    setFileCheck(false)\n    console.log(e.target.files[0])\n    let file = e.target.files[0]\n    let reader = new FileReader()\n    reader.readAsArrayBuffer(file)\n    console.log(reader)\n    setPreview(URL.createObjectURL(e.target.files[0]))\n    setFile(e.target.files[0])\n    setPreviewType(e.target.files[0].type.split('/')[0])\n  }\n\n  // Test videos\n\n\n  const handleSubmit = async (e) => {\n    \n    if (!collection) {\n      setVerified(true)\n      return\n    }\n\n    if (!file) {\n      setFileCheck(true)\n      return\n    }\n\n    if (count > 10 || count < 0) {\n      setValidate(true)\n      return\n    }\n\n    setLoading(true)\n\n    setVisibleModal(true)\n\n    //const files = e.nativeEvent[\"target\"][\"form\"][0].files[0]\n    const filetype = file[\"type\"].split(\"/\")[0]\n    let type;\n    if (filetype === 'image') {\n      type = 0\n    } else if (filetype === 'video') {\n      type = 1\n    } else {\n      type = 2\n    }\n\n\n    const stockImage = new File([image], \"image.jpeg\", {\n      type: \"image/jpeg\"\n    })\n\n    let metadata;\n\n    try {\n      metadata = await client.store({\n        name: name,\n        description: desc,\n        image: stockImage,\n        properties: {\n          file: file\n        }\n      })\n    } catch(err) {\n      console.log(err)\n      setLoading(false)\n      setError(true)\n    }\n\n\n    let hash = metadata.url\n    hash = encrypt(metadata.url)\n\n    //eslint-disable-next-line\n    const tx = await mintNsft(hash, type, name, desc, parseInt(count))\n    .then((response) => {\n      setSuccess(true)\n      setLoading(false)\n      console.log(response)\n      fetchUserMintedNsfts()\n    })\n    .catch((err) => {\n      setError(true)\n      setLoading(false)\n      setSuccess(false)\n      console.log(err)\n    })\n    \n  }\n\n  return (\n    <>\n      <div className={cn(\"section\", styles.section)}>\n        <div className={cn(\"container\", styles.container)}>\n          <div className={styles.wrapper}>\n            <div className={styles.head}>\n              <div className={cn(\"h2\", styles.title)}>\n                {location.pathname.split(\"/\")[1] === 'upload-single' ? 'Create a collectible' : 'Create multiple collectibles'}\n              </div>\n              <Link\n                className={styles.button}\n                to={location.pathname.split(\"/\")[1] === 'upload-single' ? '/upload-multiple' : '/upload-single'}\n              >\n              <button\n                className={cn(\"button-stroke button-small\", styles.button)}\n              >\n                {location.pathname.split(\"/\")[1] === 'upload-single' ? 'Switch to Multiple' : 'Switch to Single'}\n              </button>\n              </Link>\n            </div>\n            <form className={styles.form} action=\"\">\n              <div className={styles.list}>\n                <div className={styles.item}>\n                  <div className={styles.category}>Upload file</div>\n                  <div className={styles.note}>\n                    Drag or choose your file to upload\n                  </div>\n                  <div className={styles.file}>\n                    <input className={styles.load} type=\"file\" accept=\"image/*,video/*\" onChange={handleFileInput} />\n                    <div className={styles.icon}>\n                      <Icon name=\"upload-file\" size=\"24\" />\n                    </div>\n                    <div className={styles.format}>\n                      Image and Video files accepted. Max 32Gb.\n                    </div>\n                  </div>\n                </div>\n                <div className={styles.item}>\n                  <div className={styles.category}>NSFT Details</div>\n                  <div className={styles.fieldset}>\n                    <TextInput\n                      className={styles.field}\n                      label=\"Title\"\n                      name=\"NSFT\"\n                      type=\"text\"\n                      required\n                      onChange={(e) => handleNameChange(e.currentTarget.value)}\n                    />\n                    <TextInput\n                      className={styles.field}\n                      label=\"Description\"\n                      name=\"Description\"\n                      type=\"text\"\n                      placeholder=\"\"\n                      required\n                      onChange={(e) => handleDescriptionChange(e.currentTarget.value)}\n                    />\n                    {location.pathname.split(\"/\")[1] === 'upload-multiple' && (\n                      <TextInput\n                      className={styles.field}\n                      label=\"Count\"\n                      name=\"Count\"\n                      type=\"number\"\n                      value={count}\n                      placeholder=\"\"\n                      step={1}\n                      min={1}\n                      max={10}\n                      required\n                      onChange={(e) => handleCountChange(e.currentTarget.value)}\n                    />\n                    )}\n                    \n                  </div>\n                </div>\n              </div>\n              {/*<div className={styles.options}>\n                <div className={styles.option}>\n                  <div className={styles.box}>\n                    <div className={styles.category}>Put up for auction</div>\n                    <div className={styles.text}>\n                      This item will be up for auction and you'll be able to receive bids immediately.\n                    </div>\n                  </div>\n                  <Switch value={sale} setValue={setSale} />\n                </div>\n                <div className={styles.option}>\n                  <div className={styles.box}>\n                    <div className={styles.category}>Unlock once purchased</div>\n                    <div className={styles.text}>\n                      If checked then the content of your item will only be viewable after a successful sale.\n                    </div>\n                  </div>\n                  <Switch value={locking} setValue={setLocking} />\n                </div>\n                </div>*/}\n              <div className={styles.foot}>\n                <button\n                  className={cn(\"button-stroke tablet-show\", styles.button)}\n                  onClick={() => setVisiblePreview(true)}\n                  type=\"button\"\n                >\n                  Preview\n                </button>\n                <button\n                  className={cn(\"button\", styles.button)}\n                  onClick={(e) => {\n                    handleSubmit(e)\n                  }}\n                  // type=\"button\" hide after form customization\n                  type=\"button\"\n                >\n                  <span>Create item</span>\n                  <Icon name=\"arrow-next\" size=\"10\" />\n                </button>\n                {verified && (<div>You must verify your account before you can mint</div>)}\n                {fileCheck && (<div>Please upload content before continuing</div>)}\n                {validate && (<div>Count must be a number between 1 and 10</div>)}\n              </div>\n            </form>\n          </div>\n          <Preview\n            className={cn(styles.preview, { [styles.active]: visiblePreview })}\n            onClose={() => setVisiblePreview(false)}\n            obj={{\n              file: preview,\n              type: previewType,\n              name: name,\n              desc: desc,\n              count: count\n            }}\n          />\n        </div>\n      </div>\n      <Modal visible={visibleModal} onClose={() => setVisibleModal(false)}>\n        <FolowSteps className={styles.steps} obj={{ loading: loading, error: error, success: success }} onClose={() => setVisibleModal(false)} />\n      </Modal>\n    </>\n  );\n};\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}