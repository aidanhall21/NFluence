{"ast":null,"code":"var _jsxFileName = \"/Users/aidanhall/Desktop/nsft-v3/client/src/screens/UploadDetails/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport cn from \"classnames\";\nimport styles from \"./UploadDetails.module.sass\";\nimport Icon from \"../../components/Icon\";\nimport TextInput from \"../../components/TextInput\";\nimport Switch from \"../../components/Switch\";\nimport Modal from \"../../components/Modal\";\nimport Preview from \"./Preview\";\nimport FolowSteps from \"./FolowSteps\";\nimport { NFTStorage } from \"nft.storage\";\nimport CryptoJs from 'crypto-js';\nimport { useUser } from \"../../providers/UserProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst royaltiesOptions = [\"10%\", \"20%\", \"30%\"];\nconst items = [{\n  title: \"Create collection\",\n  color: \"#4BC9F0\"\n}, {\n  title: \"Crypto Legend - Professor\",\n  color: \"#45B26B\"\n}, {\n  title: \"Crypto Legend - Professor\",\n  color: \"#EF466F\"\n}, {\n  title: \"Legend Photography\",\n  color: \"#9757D7\"\n}];\nconst apikey = process.env.REACT_APP_NFT_STORAGE_KEY;\n\nconst encrypt = text => {\n  return CryptoJs.enc.Base64.stringify(CryptoJs.enc.Utf8.parse(text));\n};\n\nconst Upload = () => {\n  _s();\n\n  //const [royalties, setRoyalties] = useState(royaltiesOptions[0]);\n  const [sale, setSale] = useState(true); //const [price, setPrice] = useState(false);\n\n  const [locking, setLocking] = useState(false);\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [visiblePreview, setVisiblePreview] = useState(false);\n  const [name, setName] = useState('');\n  const [desc, setDesc] = useState('');\n  const [file, setFile] = useState();\n  const {\n    mintNsft,\n    collection,\n    createCollection\n  } = useUser();\n  const client = new NFTStorage({\n    token: apikey\n  });\n\n  const handleNameChange = async e => {\n    setName(e);\n  };\n\n  const handleDescriptionChange = async e => {\n    setDesc(e);\n  };\n\n  const handleFileInput = async e => {\n    setFile(URL.createObjectURL(e.target.files[0]));\n  }; // Test videos\n\n\n  const handleSubmit = async e => {\n    if (!collection) {\n      console.log('creating...');\n      await createCollection();\n    }\n\n    console.log(e);\n    const files = e.nativeEvent[\"target\"][\"form\"][0].files[0];\n    const filetype = files[\"type\"].split(\"/\")[0];\n    const metadata = await client.store({\n      name: name,\n      description: desc,\n      image: files\n    });\n    let hash = metadata.url;\n\n    if (locking) {\n      hash = encrypt(metadata.url);\n    }\n\n    const tx = await mintNsft(hash, filetype, name, desc, 1).then(response => console.log(response));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn(\"section\", styles.section),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(\"container\", styles.container),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.wrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.head,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: cn(\"h2\", styles.title),\n              children: \"Create single collectible\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: cn(\"button-stroke button-small\", styles.button),\n              children: \"Switch to Multiple\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: styles.form,\n            action: \"\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.list,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.category,\n                  children: \"Upload file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.note,\n                  children: \"Drag or choose your file to upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.file,\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    className: styles.load,\n                    type: \"file\",\n                    accept: \"image/*,video/*\",\n                    onChange: handleFileInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.icon,\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      name: \"upload-file\",\n                      size: \"24\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.format,\n                    children: \"Image and Video files accepted. Max 32Gb.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.category,\n                  children: \"NSFT Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.fieldset,\n                  children: [/*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"NSFT name\",\n                    name: \"NSFT\",\n                    type: \"text\",\n                    required: true,\n                    onChange: e => handleNameChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"Description\",\n                    name: \"Description\",\n                    type: \"text\",\n                    placeholder: \"\",\n                    required: true,\n                    onChange: e => handleDescriptionChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.options,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.option,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.box,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.category,\n                    children: \"Put up for auction\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.text,\n                    children: \"This item will be up for auction and you'll be able to receive bids immediately.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Switch, {\n                  value: sale,\n                  setValue: setSale\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.option,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.box,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.category,\n                    children: \"Unlock once purchased\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.text,\n                    children: \"If checked then the content of your item will only be viewable after a successful sale.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Switch, {\n                  value: locking,\n                  setValue: setLocking\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.foot,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: cn(\"button-stroke tablet-show\", styles.button),\n                onClick: () => setVisiblePreview(true),\n                type: \"button\",\n                children: \"Preview\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: cn(\"button\", styles.button),\n                onClick: e => {\n                  setVisibleModal(true);\n                  handleSubmit(e);\n                } // type=\"button\" hide after form customization\n                ,\n                type: \"button\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Create item\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"arrow-next\",\n                  size: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Preview, {\n          className: cn(styles.preview, {\n            [styles.active]: visiblePreview\n          }),\n          onClose: () => setVisiblePreview(false),\n          obj: {\n            file: file,\n            name: name,\n            desc: desc\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      visible: visibleModal,\n      onClose: () => setVisibleModal(false),\n      children: /*#__PURE__*/_jsxDEV(FolowSteps, {\n        className: styles.steps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Upload, \"b0bZhlKHyC/pgK0T9MiZBFoe5uI=\", false, function () {\n  return [useUser];\n});\n\n_c = Upload;\nexport default Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["/Users/aidanhall/Desktop/nsft-v3/client/src/screens/UploadDetails/index.js"],"names":["React","useState","cn","styles","Icon","TextInput","Switch","Modal","Preview","FolowSteps","NFTStorage","CryptoJs","useUser","royaltiesOptions","items","title","color","apikey","process","env","REACT_APP_NFT_STORAGE_KEY","encrypt","text","enc","Base64","stringify","Utf8","parse","Upload","sale","setSale","locking","setLocking","visibleModal","setVisibleModal","visiblePreview","setVisiblePreview","name","setName","desc","setDesc","file","setFile","mintNsft","collection","createCollection","client","token","handleNameChange","e","handleDescriptionChange","handleFileInput","URL","createObjectURL","target","files","handleSubmit","console","log","nativeEvent","filetype","split","metadata","store","description","image","hash","url","tx","then","response","section","container","wrapper","head","button","form","list","item","category","note","load","icon","format","fieldset","field","currentTarget","value","options","option","box","foot","preview","active","steps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,UAAT,QAA2B,aAA3B;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,OAAT,QAAwB,8BAAxB;;;AAEA,MAAMC,gBAAgB,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CAAzB;AAEA,MAAMC,KAAK,GAAG,CACZ;AACEC,EAAAA,KAAK,EAAE,mBADT;AAEEC,EAAAA,KAAK,EAAE;AAFT,CADY,EAKZ;AACED,EAAAA,KAAK,EAAE,2BADT;AAEEC,EAAAA,KAAK,EAAE;AAFT,CALY,EASZ;AACED,EAAAA,KAAK,EAAE,2BADT;AAEEC,EAAAA,KAAK,EAAE;AAFT,CATY,EAaZ;AACED,EAAAA,KAAK,EAAE,oBADT;AAEEC,EAAAA,KAAK,EAAE;AAFT,CAbY,CAAd;AAmBA,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,yBAA3B;;AAEA,MAAMC,OAAO,GAAIC,IAAD,IAAU;AACxB,SAAOX,QAAQ,CAACY,GAAT,CAAaC,MAAb,CAAoBC,SAApB,CAA8Bd,QAAQ,CAACY,GAAT,CAAaG,IAAb,CAAkBC,KAAlB,CAAwBL,IAAxB,CAA9B,CAAP;AACD,CAFD;;AAIA,MAAMM,MAAM,GAAG,MAAM;AAAA;;AACnB;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB7B,QAAQ,CAAC,IAAD,CAAhC,CAFmB,CAGnB;;AACA,QAAM,CAAC8B,OAAD,EAAUC,UAAV,IAAwB/B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACgC,YAAD,EAAeC,eAAf,IAAkCjC,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACkC,cAAD,EAAiBC,iBAAjB,IAAsCnC,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM,CAACoC,IAAD,EAAOC,OAAP,IAAkBrC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACsC,IAAD,EAAOC,OAAP,IAAkBvC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACwC,IAAD,EAAOC,OAAP,IAAkBzC,QAAQ,EAAhC;AAEA,QAAM;AAAE0C,IAAAA,QAAF;AAAYC,IAAAA,UAAZ;AAAwBC,IAAAA;AAAxB,MAA6CjC,OAAO,EAA1D;AAEA,QAAMkC,MAAM,GAAG,IAAIpC,UAAJ,CAAe;AAAEqC,IAAAA,KAAK,EAAE9B;AAAT,GAAf,CAAf;;AAEA,QAAM+B,gBAAgB,GAAG,MAAOC,CAAP,IAAa;AACpCX,IAAAA,OAAO,CAACW,CAAD,CAAP;AACD,GAFD;;AAIA,QAAMC,uBAAuB,GAAG,MAAOD,CAAP,IAAa;AAC3CT,IAAAA,OAAO,CAACS,CAAD,CAAP;AACD,GAFD;;AAIA,QAAME,eAAe,GAAG,MAAOF,CAAP,IAAa;AACnCP,IAAAA,OAAO,CAACU,GAAG,CAACC,eAAJ,CAAoBJ,CAAC,CAACK,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB,CAAD,CAAP;AACD,GAFD,CAvBmB,CA2BnB;;;AAEA,QAAMC,YAAY,GAAG,MAAOP,CAAP,IAAa;AAChC,QAAI,CAACL,UAAL,EAAiB;AACfa,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,YAAMb,gBAAgB,EAAtB;AACD;;AAEDY,IAAAA,OAAO,CAACC,GAAR,CAAYT,CAAZ;AAEA,UAAMM,KAAK,GAAGN,CAAC,CAACU,WAAF,CAAc,QAAd,EAAwB,MAAxB,EAAgC,CAAhC,EAAmCJ,KAAnC,CAAyC,CAAzC,CAAd;AACA,UAAMK,QAAQ,GAAGL,KAAK,CAAC,MAAD,CAAL,CAAcM,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAjB;AAEA,UAAMC,QAAQ,GAAG,MAAMhB,MAAM,CAACiB,KAAP,CAAa;AAClC1B,MAAAA,IAAI,EAAEA,IAD4B;AAElC2B,MAAAA,WAAW,EAAEzB,IAFqB;AAGlC0B,MAAAA,KAAK,EAAEV;AAH2B,KAAb,CAAvB;AAMA,QAAIW,IAAI,GAAGJ,QAAQ,CAACK,GAApB;;AAEA,QAAIpC,OAAJ,EAAa;AACXmC,MAAAA,IAAI,GAAG7C,OAAO,CAACyC,QAAQ,CAACK,GAAV,CAAd;AACD;;AAED,UAAMC,EAAE,GAAG,MAAMzB,QAAQ,CAACuB,IAAD,EAAON,QAAP,EAAiBvB,IAAjB,EAAuBE,IAAvB,EAA6B,CAA7B,CAAR,CAChB8B,IADgB,CACVC,QAAD,IAAcb,OAAO,CAACC,GAAR,CAAYY,QAAZ,CADH,CAAjB;AAID,GA3BD;;AA6BA,sBACE;AAAA,4BACE;AAAK,MAAA,SAAS,EAAEpE,EAAE,CAAC,SAAD,EAAYC,MAAM,CAACoE,OAAnB,CAAlB;AAAA,6BACE;AAAK,QAAA,SAAS,EAAErE,EAAE,CAAC,WAAD,EAAcC,MAAM,CAACqE,SAArB,CAAlB;AAAA,gCACE;AAAK,UAAA,SAAS,EAAErE,MAAM,CAACsE,OAAvB;AAAA,kCACE;AAAK,YAAA,SAAS,EAAEtE,MAAM,CAACuE,IAAvB;AAAA,oCACE;AAAK,cAAA,SAAS,EAAExE,EAAE,CAAC,IAAD,EAAOC,MAAM,CAACY,KAAd,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AACE,cAAA,SAAS,EAAEb,EAAE,CAAC,4BAAD,EAA+BC,MAAM,CAACwE,MAAtC,CADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAWE;AAAM,YAAA,SAAS,EAAExE,MAAM,CAACyE,IAAxB;AAA8B,YAAA,MAAM,EAAC,EAArC;AAAA,oCACE;AAAK,cAAA,SAAS,EAAEzE,MAAM,CAAC0E,IAAvB;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAE1E,MAAM,CAAC2E,IAAvB;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAE3E,MAAM,CAAC4E,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAK,kBAAA,SAAS,EAAE5E,MAAM,CAAC6E,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAKE;AAAK,kBAAA,SAAS,EAAE7E,MAAM,CAACsC,IAAvB;AAAA,0CACE;AAAO,oBAAA,SAAS,EAAEtC,MAAM,CAAC8E,IAAzB;AAA+B,oBAAA,IAAI,EAAC,MAApC;AAA2C,oBAAA,MAAM,EAAC,iBAAlD;AAAoE,oBAAA,QAAQ,EAAE9B;AAA9E;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAEhD,MAAM,CAAC+E,IAAvB;AAAA,2CACE,QAAC,IAAD;AAAM,sBAAA,IAAI,EAAC,aAAX;AAAyB,sBAAA,IAAI,EAAC;AAA9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF,eAKE;AAAK,oBAAA,SAAS,EAAE/E,MAAM,CAACgF,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BALF;AAAA;AAAA;AAAA;AAAA;AAAA,wBALF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAgBE;AAAK,gBAAA,SAAS,EAAEhF,MAAM,CAAC2E,IAAvB;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAE3E,MAAM,CAAC4E,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAK,kBAAA,SAAS,EAAE5E,MAAM,CAACiF,QAAvB;AAAA,0CACE,QAAC,SAAD;AACE,oBAAA,SAAS,EAAEjF,MAAM,CAACkF,KADpB;AAEE,oBAAA,KAAK,EAAC,WAFR;AAGE,oBAAA,IAAI,EAAC,MAHP;AAIE,oBAAA,IAAI,EAAC,MAJP;AAKE,oBAAA,QAAQ,MALV;AAME,oBAAA,QAAQ,EAAGpC,CAAD,IAAOD,gBAAgB,CAACC,CAAC,CAACqC,aAAF,CAAgBC,KAAjB;AANnC;AAAA;AAAA;AAAA;AAAA,0BADF,eASE,QAAC,SAAD;AACE,oBAAA,SAAS,EAAEpF,MAAM,CAACkF,KADpB;AAEE,oBAAA,KAAK,EAAC,aAFR;AAGE,oBAAA,IAAI,EAAC,aAHP;AAIE,oBAAA,IAAI,EAAC,MAJP;AAKE,oBAAA,WAAW,EAAC,EALd;AAME,oBAAA,QAAQ,MANV;AAOE,oBAAA,QAAQ,EAAGpC,CAAD,IAAOC,uBAAuB,CAACD,CAAC,CAACqC,aAAF,CAAgBC,KAAjB;AAP1C;AAAA;AAAA;AAAA;AAAA,0BATF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAwCE;AAAK,cAAA,SAAS,EAAEpF,MAAM,CAACqF,OAAvB;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAErF,MAAM,CAACsF,MAAvB;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAEtF,MAAM,CAACuF,GAAvB;AAAA,0CACE;AAAK,oBAAA,SAAS,EAAEvF,MAAM,CAAC4E,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAE5E,MAAM,CAACmB,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAOE,QAAC,MAAD;AAAQ,kBAAA,KAAK,EAAEO,IAAf;AAAqB,kBAAA,QAAQ,EAAEC;AAA/B;AAAA;AAAA;AAAA;AAAA,wBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAUE;AAAK,gBAAA,SAAS,EAAE3B,MAAM,CAACsF,MAAvB;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAEtF,MAAM,CAACuF,GAAvB;AAAA,0CACE;AAAK,oBAAA,SAAS,EAAEvF,MAAM,CAAC4E,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAE5E,MAAM,CAACmB,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAOE,QAAC,MAAD;AAAQ,kBAAA,KAAK,EAAES,OAAf;AAAwB,kBAAA,QAAQ,EAAEC;AAAlC;AAAA;AAAA;AAAA;AAAA,wBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAxCF,eA4DE;AAAK,cAAA,SAAS,EAAE7B,MAAM,CAACwF,IAAvB;AAAA,sCACE;AACE,gBAAA,SAAS,EAAEzF,EAAE,CAAC,2BAAD,EAA8BC,MAAM,CAACwE,MAArC,CADf;AAEE,gBAAA,OAAO,EAAE,MAAMvC,iBAAiB,CAAC,IAAD,CAFlC;AAGE,gBAAA,IAAI,EAAC,QAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAQE;AACE,gBAAA,SAAS,EAAElC,EAAE,CAAC,QAAD,EAAWC,MAAM,CAACwE,MAAlB,CADf;AAEE,gBAAA,OAAO,EAAG1B,CAAD,IAAO;AACdf,kBAAAA,eAAe,CAAC,IAAD,CAAf;AACAsB,kBAAAA,YAAY,CAACP,CAAD,CAAZ;AACD,iBALH,CAME;AANF;AAOE,gBAAA,IAAI,EAAC,QAPP;AAAA,wCASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBATF,eAUE,QAAC,IAAD;AAAM,kBAAA,IAAI,EAAC,YAAX;AAAwB,kBAAA,IAAI,EAAC;AAA7B;AAAA;AAAA;AAAA;AAAA,wBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA5DF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eA+FE,QAAC,OAAD;AACE,UAAA,SAAS,EAAE/C,EAAE,CAACC,MAAM,CAACyF,OAAR,EAAiB;AAAE,aAACzF,MAAM,CAAC0F,MAAR,GAAiB1D;AAAnB,WAAjB,CADf;AAEE,UAAA,OAAO,EAAE,MAAMC,iBAAiB,CAAC,KAAD,CAFlC;AAGE,UAAA,GAAG,EAAE;AACHK,YAAAA,IAAI,EAAEA,IADH;AAEHJ,YAAAA,IAAI,EAAEA,IAFH;AAGHE,YAAAA,IAAI,EAAEA;AAHH;AAHP;AAAA;AAAA;AAAA;AAAA,gBA/FF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eA4GE,QAAC,KAAD;AAAO,MAAA,OAAO,EAAEN,YAAhB;AAA8B,MAAA,OAAO,EAAE,MAAMC,eAAe,CAAC,KAAD,CAA5D;AAAA,6BACE,QAAC,UAAD;AAAY,QAAA,SAAS,EAAE/B,MAAM,CAAC2F;AAA9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA5GF;AAAA,kBADF;AAkHD,CA5KD;;GAAMlE,M;UAW+ChB,O;;;KAX/CgB,M;AA8KN,eAAeA,MAAf","sourcesContent":["import React, { useState } from \"react\";\nimport cn from \"classnames\";\nimport styles from \"./UploadDetails.module.sass\";\nimport Icon from \"../../components/Icon\";\nimport TextInput from \"../../components/TextInput\";\nimport Switch from \"../../components/Switch\";\nimport Modal from \"../../components/Modal\";\nimport Preview from \"./Preview\";\nimport FolowSteps from \"./FolowSteps\";\nimport { NFTStorage } from \"nft.storage\"\nimport CryptoJs from 'crypto-js'\nimport { useUser } from \"../../providers/UserProvider\";\n\nconst royaltiesOptions = [\"10%\", \"20%\", \"30%\"];\n\nconst items = [\n  {\n    title: \"Create collection\",\n    color: \"#4BC9F0\",\n  },\n  {\n    title: \"Crypto Legend - Professor\",\n    color: \"#45B26B\",\n  },\n  {\n    title: \"Crypto Legend - Professor\",\n    color: \"#EF466F\",\n  },\n  {\n    title: \"Legend Photography\",\n    color: \"#9757D7\",\n  },\n];\n\nconst apikey = process.env.REACT_APP_NFT_STORAGE_KEY\n\nconst encrypt = (text) => {\n  return CryptoJs.enc.Base64.stringify(CryptoJs.enc.Utf8.parse(text))\n}\n\nconst Upload = () => {\n  //const [royalties, setRoyalties] = useState(royaltiesOptions[0]);\n  const [sale, setSale] = useState(true);\n  //const [price, setPrice] = useState(false);\n  const [locking, setLocking] = useState(false);\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [visiblePreview, setVisiblePreview] = useState(false);\n  const [name, setName] = useState('')\n  const [desc, setDesc] = useState('')\n  const [file, setFile] = useState()\n\n  const { mintNsft, collection, createCollection } = useUser()\n\n  const client = new NFTStorage({ token: apikey })\n\n  const handleNameChange = async (e) => {\n    setName(e)\n  }\n\n  const handleDescriptionChange = async (e) => {\n    setDesc(e)\n  }\n\n  const handleFileInput = async (e) => {\n    setFile(URL.createObjectURL(e.target.files[0]))\n  }\n\n  // Test videos\n\n  const handleSubmit = async (e) => {\n    if (!collection) {\n      console.log('creating...')\n      await createCollection()\n    }\n    \n    console.log(e)\n\n    const files = e.nativeEvent[\"target\"][\"form\"][0].files[0]\n    const filetype = files[\"type\"].split(\"/\")[0]\n\n    const metadata = await client.store({\n      name: name,\n      description: desc,\n      image: files\n    })\n\n    let hash = metadata.url\n\n    if (locking) {\n      hash = encrypt(metadata.url)\n    }\n\n    const tx = await mintNsft(hash, filetype, name, desc, 1)\n    .then((response) => console.log(response))\n    \n    \n  }\n\n  return (\n    <>\n      <div className={cn(\"section\", styles.section)}>\n        <div className={cn(\"container\", styles.container)}>\n          <div className={styles.wrapper}>\n            <div className={styles.head}>\n              <div className={cn(\"h2\", styles.title)}>\n                Create single collectible\n              </div>\n              <button\n                className={cn(\"button-stroke button-small\", styles.button)}\n              >\n                Switch to Multiple\n              </button>\n            </div>\n            <form className={styles.form} action=\"\">\n              <div className={styles.list}>\n                <div className={styles.item}>\n                  <div className={styles.category}>Upload file</div>\n                  <div className={styles.note}>\n                    Drag or choose your file to upload\n                  </div>\n                  <div className={styles.file}>\n                    <input className={styles.load} type=\"file\" accept=\"image/*,video/*\" onChange={handleFileInput} />\n                    <div className={styles.icon}>\n                      <Icon name=\"upload-file\" size=\"24\" />\n                    </div>\n                    <div className={styles.format}>\n                      Image and Video files accepted. Max 32Gb.\n                    </div>\n                  </div>\n                </div>\n                <div className={styles.item}>\n                  <div className={styles.category}>NSFT Details</div>\n                  <div className={styles.fieldset}>\n                    <TextInput\n                      className={styles.field}\n                      label=\"NSFT name\"\n                      name=\"NSFT\"\n                      type=\"text\"\n                      required\n                      onChange={(e) => handleNameChange(e.currentTarget.value)}\n                    />\n                    <TextInput\n                      className={styles.field}\n                      label=\"Description\"\n                      name=\"Description\"\n                      type=\"text\"\n                      placeholder=\"\"\n                      required\n                      onChange={(e) => handleDescriptionChange(e.currentTarget.value)}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className={styles.options}>\n                <div className={styles.option}>\n                  <div className={styles.box}>\n                    <div className={styles.category}>Put up for auction</div>\n                    <div className={styles.text}>\n                      This item will be up for auction and you'll be able to receive bids immediately.\n                    </div>\n                  </div>\n                  <Switch value={sale} setValue={setSale} />\n                </div>\n                <div className={styles.option}>\n                  <div className={styles.box}>\n                    <div className={styles.category}>Unlock once purchased</div>\n                    <div className={styles.text}>\n                      If checked then the content of your item will only be viewable after a successful sale.\n                    </div>\n                  </div>\n                  <Switch value={locking} setValue={setLocking} />\n                </div>\n              </div>\n              <div className={styles.foot}>\n                <button\n                  className={cn(\"button-stroke tablet-show\", styles.button)}\n                  onClick={() => setVisiblePreview(true)}\n                  type=\"button\"\n                >\n                  Preview\n                </button>\n                <button\n                  className={cn(\"button\", styles.button)}\n                  onClick={(e) => {\n                    setVisibleModal(true)\n                    handleSubmit(e)\n                  }}\n                  // type=\"button\" hide after form customization\n                  type=\"button\"\n                >\n                  <span>Create item</span>\n                  <Icon name=\"arrow-next\" size=\"10\" />\n                </button>\n              </div>\n            </form>\n          </div>\n          <Preview\n            className={cn(styles.preview, { [styles.active]: visiblePreview })}\n            onClose={() => setVisiblePreview(false)}\n            obj={{\n              file: file,\n              name: name,\n              desc: desc\n            }}\n          />\n        </div>\n      </div>\n      <Modal visible={visibleModal} onClose={() => setVisibleModal(false)}>\n        <FolowSteps className={styles.steps} />\n      </Modal>\n    </>\n  );\n};\n\nexport default Upload;\n"]},"metadata":{},"sourceType":"module"}