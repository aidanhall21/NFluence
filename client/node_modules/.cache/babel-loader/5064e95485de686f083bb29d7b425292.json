{"ast":null,"code":"var _jsxFileName = \"/Users/aidanhall/Desktop/nsft-v3/client/src/screens/ProfileEdit/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport cn from \"classnames\";\nimport styles from \"./ProfileEdit.module.sass\";\nimport Control from \"../../components/Control\";\nimport TextInput from \"../../components/TextInput\";\nimport TextArea from \"../../components/TextArea\";\nimport Icon from \"../../components/Icon\";\nimport { useAuth } from \"../../providers/AuthProvider\";\nimport { useUser } from \"../../providers/UserProvider\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst breadcrumbs = [{\n  title: \"Home\",\n  url: \"/\"\n}, {\n  title: \"Edit Profile\"\n}];\nlet api_node;\nprocess.env.NODE_ENV === \"production\" ? api_node = '' : api_node = process.env.REACT_APP_LOCAL_API_NODE;\n\nconst ProfileEdit = () => {\n  _s();\n\n  const {\n    user,\n    logOut\n  } = useAuth();\n  const {\n    balance,\n    profile\n  } = useUser();\n  const history = useHistory();\n  const [name, setName] = useState('');\n  const [username, setUsername] = useState('');\n  const [bio, setBio] = useState('');\n  const [url, setUrl] = useState('');\n  const [twitter, setTwitter] = useState('');\n  const [insta, setInsta] = useState('');\n  const [email, setEmail] = useState('');\n\n  const onProfilePhotoChange = e => {\n    let data = new FormData();\n    let file = e.target.files[0];\n    let ext_array = file.name.split('.');\n    let ext = ext_array[ext_array.length - 1];\n    data.append('file', file, (user === null || user === void 0 ? void 0 : user.addr) + '-profile.' + ext);\n    axios.post(`${api_node}/api/v1/upload`, data, {});\n    profile.verified ? axios.put(`${api_node}/api/v1/user/update`, {\n      name: profile.name,\n      email: profile.email,\n      handle: profile.handle,\n      cover_image: profile.cover_image,\n      profile_image: true,\n      address: user === null || user === void 0 ? void 0 : user.addr\n    }) : axios.post(`${api_node}/api/v1/user`, {\n      name: profile.name,\n      email: profile.email,\n      avatar: profile.avatar,\n      verified: true,\n      cover_image: false,\n      profile_image: true,\n      handle: profile.handle,\n      address: user === null || user === void 0 ? void 0 : user.addr\n    });\n  };\n\n  const handleNameChange = async e => {\n    setName(e);\n  };\n\n  const handleUsernameChange = async e => {\n    setUsername(e);\n  };\n\n  const handleBioChange = async e => {\n    setBio(e);\n  };\n\n  const handleUrlChange = async e => {\n    setUrl(e);\n  };\n\n  const handleTwitterChange = async e => {\n    setTwitter(e);\n  };\n\n  const handleInstagramChange = async e => {\n    setInsta(e);\n  };\n\n  const handleEmailChange = async e => {\n    setEmail(e);\n  };\n\n  useEffect(() => {\n    setName(profile.name);\n    setUsername(profile.handle);\n    setBio(profile.bio);\n    setUrl(profile.url);\n    setTwitter(profile.twitter);\n    setInsta(profile.instagram);\n    setEmail(profile.email);\n  }, [profile]);\n\n  const handleSubmit = () => {\n    console.log(username);\n    profile.verified ? axios.put(`${api_node}/api/v1/user/update`, {\n      name: name,\n      email: email,\n      handle: username,\n      cover_image: profile.cover_image,\n      profile_image: profile.profile_image,\n      address: user === null || user === void 0 ? void 0 : user.addr,\n      bio: bio,\n      url: url,\n      twitter: twitter,\n      instagram: insta\n    }) : axios.post(`${api_node}/api/v1/user`, {\n      name: name,\n      email: email,\n      avatar: profile.avatar,\n      verified: true,\n      cover_image: profile.cover_image,\n      profile_image: profile.profile_image,\n      handle: username,\n      address: user === null || user === void 0 ? void 0 : user.addr,\n      bio: bio,\n      url: url,\n      twitter: twitter,\n      instagram: insta\n    });\n    window.location.reload();\n    history.push(\"/profile\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.page,\n    children: [/*#__PURE__*/_jsxDEV(Control, {\n      className: styles.control,\n      item: breadcrumbs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: cn(\"section-pt80\", styles.section),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(\"container\", styles.container),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.top,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: cn(\"h2\", styles.title),\n            children: \"Edit profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.info,\n            children: [\"You can set preferred display name, create\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"your profile URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), \" and manage other personal settings.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.row,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.col,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.user,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.avatar,\n                children: profile.profile_image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `/user-images/${user === null || user === void 0 ? void 0 : user.addr}-profile.jpg`,\n                  alt: \"Avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 42\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `data:image/png;base64,${profile.avatar}`,\n                  alt: \"Avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 112\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.details,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.stage,\n                  children: \"Profile photo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.file,\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: cn(\"button-stroke button-small\", styles.button),\n                    children: \"Upload\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: styles.load,\n                    type: \"file\",\n                    name: \"file\",\n                    accept: \"image/*\",\n                    onChange: onProfilePhotoChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.col,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.list,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.category,\n                  children: \"Account info\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.fieldset,\n                  children: [/*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"name\",\n                    name: \"Name\",\n                    type: \"text\",\n                    value: profile.name ? profile.name : \"Enter your name\",\n                    required: true,\n                    onChange: e => handleNameChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"display name\",\n                    name: \"Handle\",\n                    type: \"text\",\n                    placeholder: profile.handle ? profile.handle : \"Enter your display name\",\n                    required: true,\n                    onChange: e => handleUsernameChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"email\",\n                    name: \"Email\",\n                    type: \"text\",\n                    placeholder: profile.email ? profile.email : \"Enter your email\",\n                    required: true,\n                    onChange: e => handleEmailChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n                    className: styles.field,\n                    label: \"Bio\",\n                    name: \"Bio\",\n                    placeholder: profile.bio ? profile.bio : \"About yourself in a few words\",\n                    required: \"required\",\n                    onChange: e => handleBioChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.item,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.category,\n                  children: \"Social\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.fieldset,\n                  children: [/*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"portfolio or website\",\n                    name: \"Portfolio\",\n                    type: \"text\",\n                    placeholder: profile.url ? profile.url : \"Enter URL\",\n                    required: true,\n                    onChange: e => handleUrlChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"twitter\",\n                    name: \"Twitter\",\n                    type: \"text\",\n                    placeholder: profile.twitter ? profile.twitter : \"@twitter username\",\n                    required: true,\n                    onChange: e => handleTwitterChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n                    className: styles.field,\n                    label: \"instagram\",\n                    name: \"Instagram\",\n                    type: \"text\",\n                    placeholder: profile.instagram ? profile.instagram : \"@instagram username\",\n                    required: true,\n                    onChange: e => handleInstagramChange(e.currentTarget.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.btns,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: cn(\"button\", styles.button),\n                onClick: () => handleSubmit(),\n                children: \"Update Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProfileEdit, \"MGRh4K+LlrrEJn6t7tq3uL+Nm2w=\", false, function () {\n  return [useAuth, useUser, useHistory];\n});\n\n_c = ProfileEdit;\nexport default ProfileEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileEdit\");","map":{"version":3,"sources":["/Users/aidanhall/Desktop/nsft-v3/client/src/screens/ProfileEdit/index.js"],"names":["React","useEffect","useState","Link","useHistory","cn","styles","Control","TextInput","TextArea","Icon","useAuth","useUser","axios","breadcrumbs","title","url","api_node","process","env","NODE_ENV","REACT_APP_LOCAL_API_NODE","ProfileEdit","user","logOut","balance","profile","history","name","setName","username","setUsername","bio","setBio","setUrl","twitter","setTwitter","insta","setInsta","email","setEmail","onProfilePhotoChange","e","data","FormData","file","target","files","ext_array","split","ext","length","append","addr","post","verified","put","handle","cover_image","profile_image","address","avatar","handleNameChange","handleUsernameChange","handleBioChange","handleUrlChange","handleTwitterChange","handleInstagramChange","handleEmailChange","instagram","handleSubmit","console","log","window","location","reload","push","page","control","section","container","top","info","row","col","details","stage","button","load","list","item","category","fieldset","field","currentTarget","value","btns"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport cn from \"classnames\";\nimport styles from \"./ProfileEdit.module.sass\";\nimport Control from \"../../components/Control\";\nimport TextInput from \"../../components/TextInput\";\nimport TextArea from \"../../components/TextArea\";\nimport Icon from \"../../components/Icon\";\nimport { useAuth } from \"../../providers/AuthProvider\";\nimport { useUser } from \"../../providers/UserProvider\";\nimport axios from \"axios\";\n\nconst breadcrumbs = [\n  {\n    title: \"Home\",\n    url: \"/\",\n  },\n  {\n    title: \"Edit Profile\",\n  },\n];\n\nlet api_node;\nprocess.env.NODE_ENV === \"production\"\n  ? api_node = ''\n  : api_node = process.env.REACT_APP_LOCAL_API_NODE\n\n\nconst ProfileEdit = () => {\n  const { user, logOut } = useAuth()\n  const { balance, profile } = useUser()\n  const history = useHistory()\n  const [name, setName] = useState('')\n  const [username, setUsername] = useState('')\n  const [bio, setBio] = useState('')\n  const [url, setUrl] = useState('')\n  const [twitter, setTwitter] = useState('')\n  const [insta, setInsta] = useState('')\n  const [email, setEmail] = useState('')\n\n  const onProfilePhotoChange = (e) => {\n    let data = new FormData()\n    let file = e.target.files[0]\n    let ext_array = file.name.split('.')\n    let ext = ext_array[ext_array.length - 1]\n    data.append('file', file, user?.addr + '-profile.' + ext)\n    axios.post(`${api_node}/api/v1/upload`, data, {})\n    profile.verified ?\n    axios.put(`${api_node}/api/v1/user/update`, {\n      name: profile.name,\n      email: profile.email,\n      handle: profile.handle,\n      cover_image: profile.cover_image,\n      profile_image: true,\n      address: user?.addr\n    }) : axios.post(`${api_node}/api/v1/user`, {\n      name: profile.name,\n      email: profile.email,\n      avatar: profile.avatar,\n      verified: true,\n      cover_image: false,\n      profile_image: true,\n      handle: profile.handle,\n      address: user?.addr,\n    })\n  }\n\n  const handleNameChange = async (e) => {\n    setName(e)\n  }\n\n  const handleUsernameChange = async (e) => {\n    setUsername(e);\n  }\n\n  const handleBioChange = async (e) => {\n    setBio(e);\n  }\n\n  const handleUrlChange = async (e) => {\n    setUrl(e)\n  }\n\n  const handleTwitterChange = async (e) => {\n    setTwitter(e)\n  }\n\n  const handleInstagramChange = async (e) => {\n    setInsta(e)\n  }\n\n  const handleEmailChange = async (e) => {\n    setEmail(e)\n  }\n\n  useEffect(() => {\n    setName(profile.name)\n    setUsername(profile.handle)\n    setBio(profile.bio)\n    setUrl(profile.url)\n    setTwitter(profile.twitter)\n    setInsta(profile.instagram)\n    setEmail(profile.email)\n  }, [profile])\n\n  const handleSubmit = () => {\n    console.log(username)\n    profile.verified ?\n    axios.put(`${api_node}/api/v1/user/update`, {\n      name: name,\n      email: email,\n      handle: username,\n      cover_image: profile.cover_image,\n      profile_image: profile.profile_image,\n      address: user?.addr,\n      bio: bio,\n      url: url,\n      twitter: twitter,\n      instagram: insta\n    }) : axios.post(`${api_node}/api/v1/user`, {\n      name: name,\n      email: email,\n      avatar: profile.avatar,\n      verified: true,\n      cover_image: profile.cover_image,\n      profile_image: profile.profile_image,\n      handle: username,\n      address: user?.addr,\n      bio: bio,\n      url: url,\n      twitter: twitter,\n      instagram: insta\n    })\n    window.location.reload()\n    history.push(\"/profile\");\n  }\n\n  return (\n    <div className={styles.page}>\n      <Control className={styles.control} item={breadcrumbs} />\n      <div className={cn(\"section-pt80\", styles.section)}>\n        <div className={cn(\"container\", styles.container)}>\n          <div className={styles.top}>\n            <h1 className={cn(\"h2\", styles.title)}>Edit profile</h1>\n            <div className={styles.info}>\n              You can set preferred display name, create{\" \"}\n              <strong>your profile URL</strong> and manage other personal\n              settings.\n            </div>\n          </div>\n          <div className={styles.row}>\n            <div className={styles.col}>\n              <div className={styles.user}>\n                <div className={styles.avatar}>\n                {profile.profile_image ? <img src={`/user-images/${user?.addr}-profile.jpg`} alt=\"Avatar\" /> : <img src={`data:image/png;base64,${profile.avatar}`} alt=\"Avatar\" />}\n                </div>\n                <div className={styles.details}>\n                  <div className={styles.stage}>Profile photo</div>\n                  <div className={styles.file}>\n                    <button\n                      className={cn(\"button-stroke button-small\", styles.button)}\n                    >\n                      Upload\n                    </button>\n                    <input className={styles.load} type=\"file\" name=\"file\" accept=\"image/*\" onChange={onProfilePhotoChange} />\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className={styles.col}>\n              <div className={styles.list}>\n                <div className={styles.item}>\n                  <div className={styles.category}>Account info</div>\n                  <div className={styles.fieldset}>\n                    <TextInput\n                      className={styles.field}\n                      label=\"name\"\n                      name=\"Name\"\n                      type=\"text\"\n                      value={profile.name ? profile.name : \"Enter your name\"}\n                      required\n                      onChange={(e) => handleNameChange(e.currentTarget.value)}\n                    />\n                    <TextInput\n                      className={styles.field}\n                      label=\"display name\"\n                      name=\"Handle\"\n                      type=\"text\"\n                      placeholder={profile.handle ? profile.handle : \"Enter your display name\"}\n                      required\n                      onChange={(e) => handleUsernameChange(e.currentTarget.value)}\n                    />\n                    <TextInput\n                      className={styles.field}\n                      label=\"email\"\n                      name=\"Email\"\n                      type=\"text\"\n                      placeholder={profile.email ? profile.email : \"Enter your email\"}\n                      required\n                      onChange={(e) => handleEmailChange(e.currentTarget.value)}\n                    />\n                    <TextArea\n                      className={styles.field}\n                      label=\"Bio\"\n                      name=\"Bio\"\n                      placeholder={profile.bio ? profile.bio : \"About yourself in a few words\"}\n                      required=\"required\"\n                      onChange={(e) => handleBioChange(e.currentTarget.value)}\n                    />\n                  </div>\n                </div>\n                <div className={styles.item}>\n                  <div className={styles.category}>Social</div>\n                  <div className={styles.fieldset}>\n                    <TextInput\n                      className={styles.field}\n                      label=\"portfolio or website\"\n                      name=\"Portfolio\"\n                      type=\"text\"\n                      placeholder={profile.url ? profile.url : \"Enter URL\"}\n                      required\n                      onChange={(e) => handleUrlChange(e.currentTarget.value)}\n                    />\n                    <TextInput\n                      className={styles.field}\n                      label=\"twitter\"\n                      name=\"Twitter\"\n                      type=\"text\"\n                      placeholder={profile.twitter ? profile.twitter : \"@twitter username\"}\n                      required\n                      onChange = {(e) => handleTwitterChange(e.currentTarget.value)}\n                    />\n                    <TextInput\n                      className={styles.field}\n                      label=\"instagram\"\n                      name=\"Instagram\"\n                      type=\"text\"\n                      placeholder={profile.instagram ? profile.instagram : \"@instagram username\"}\n                      required\n                      onChange = {(e) => handleInstagramChange(e.currentTarget.value)}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className={styles.btns}>\n                <button className={cn(\"button\", styles.button)} onClick={() => handleSubmit()}>\n                  Update Profile\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}