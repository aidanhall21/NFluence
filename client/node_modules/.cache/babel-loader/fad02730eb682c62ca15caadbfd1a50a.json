{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from \"react\";\nimport { defaultReducer } from \"../reducer/defaultReducer\";\nimport Identicon from \"identicon.js\";\nimport axios from \"axios\"; //import { AVATAR_DEFAULT } from \"../components/Header/User/avatar-default\";\n\nlet api_node;\nprocess.env.NODE_ENV === \"production\" ? api_node = '' : api_node = process.env.REACT_APP_LOCAL_API_NODE;\nexport default function useProfileData(user, loggedIn) {\n  _s();\n\n  const [state, dispatch] = useReducer(defaultReducer, {\n    loading: false,\n    error: false,\n    data: {\n      avatar: '',\n      name: 'new_user',\n      handle: user === null || user === void 0 ? void 0 : user.addr,\n      cover_image: false,\n      profile_image: false,\n      email: '',\n      verified: false,\n      bio: '',\n      url: null,\n      twitter: null,\n      instagram: null,\n      db: false\n    }\n  });\n  useEffect(() => {\n    if (!(user === null || user === void 0 ? void 0 : user.addr)) return;\n\n    const fetchUserData = async () => {\n      dispatch({\n        type: 'PROCESSING'\n      });\n      let hash;\n      !loggedIn ? hash = '0x0000000000000' : hash = user === null || user === void 0 ? void 0 : user.addr;\n      let avatar = new Identicon(hash).toString();\n\n      try {\n        const api = await axios.get(`${api_node}/api/v1/user/${user === null || user === void 0 ? void 0 : user.addr}`);\n        const serverResponse = api.data;\n\n        if (serverResponse.length > 0) {\n          dispatch({\n            type: 'SUCCESS',\n            payload: serverResponse[0]\n          });\n        } else {\n          dispatch({\n            type: 'SUCCESS',\n            payload: {\n              avatar: avatar,\n              name: 'new_user',\n              handle: user === null || user === void 0 ? void 0 : user.addr,\n              cover_image: false,\n              profile_image: false,\n              email: '',\n              bio: '',\n              verified: false,\n              url: null,\n              twitter: null,\n              instagram: null,\n              db: false\n            }\n          });\n        }\n      } catch (err) {\n        dispatch({\n          type: 'ERROR'\n        });\n      }\n    };\n\n    fetchUserData();\n  }, [user, loggedIn]);\n  return { ...state\n  };\n}\n\n_s(useProfileData, \"ZjeHzQDAl84IT26IoXj32nuDWaM=\");","map":{"version":3,"sources":["/Users/aidanhall/Desktop/nsft/client/src/hooks/use-profile-data.hook.js"],"names":["useEffect","useReducer","defaultReducer","Identicon","axios","api_node","process","env","NODE_ENV","REACT_APP_LOCAL_API_NODE","useProfileData","user","loggedIn","state","dispatch","loading","error","data","avatar","name","handle","addr","cover_image","profile_image","email","verified","bio","url","twitter","instagram","db","fetchUserData","type","hash","toString","api","get","serverResponse","length","payload","err"],"mappings":"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","sourcesContent":["import { useEffect, useReducer } from \"react\";\nimport { defaultReducer } from \"../reducer/defaultReducer\";\nimport Identicon from \"identicon.js\";\nimport axios from \"axios\";\n//import { AVATAR_DEFAULT } from \"../components/Header/User/avatar-default\";\n\nlet api_node;\nprocess.env.NODE_ENV === \"production\"\n  ? api_node = ''\n  : api_node = process.env.REACT_APP_LOCAL_API_NODE\n\nexport default function useProfileData(user, loggedIn) {\n    const [state, dispatch] = useReducer(defaultReducer, {\n        loading: false,\n        error: false,\n        data: {\n            avatar: '',\n            name: 'new_user',\n            handle: user?.addr,\n            cover_image: false,\n            profile_image: false,\n            email: '',\n            verified: false,\n            bio: '',\n            url: null,\n            twitter: null,\n            instagram: null,\n            db: false\n          }\n      })\n\n\n\n      useEffect(() => {\n        if (!user?.addr) return\n        const fetchUserData = async () => {\n          dispatch({ type: 'PROCESSING' })\n          let hash;\n          !loggedIn ? hash = '0x0000000000000' : hash = user?.addr\n          let avatar = new Identicon(hash).toString()\n          try {\n            const api = await axios.get(`${api_node}/api/v1/user/${user?.addr}`)\n            const serverResponse = api.data;\n            if (serverResponse.length > 0) {\n              dispatch({ type: 'SUCCESS', payload: serverResponse[0] })\n            } else {\n              dispatch({ type: 'SUCCESS', payload: {\n                avatar: avatar,\n                name: 'new_user',\n                handle: user?.addr,\n                cover_image: false,\n                profile_image: false,\n                email: '',\n                bio: '',\n                verified: false,\n                url: null,\n                twitter: null,\n                instagram: null,\n                db: false\n              }})\n            }\n          } catch(err) {\n            dispatch({ type: 'ERROR' })\n          }\n        }\n        fetchUserData()\n      }, [user, loggedIn])\n\n    return {\n        ...state,\n    }\n}"]},"metadata":{},"sourceType":"module"}