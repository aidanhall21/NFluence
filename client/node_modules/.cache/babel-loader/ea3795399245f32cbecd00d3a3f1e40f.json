{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useReducer } from \"react\";\nimport { userNsftReducer } from \"../reducer/userNsftReducer\";\nimport { mutate, query, tx } from '@onflow/fcl';\nimport { MINT_NSFT } from \"../flow/mint-nsft.tx\";\nimport { authorizationFunction } from \"../services/authorization-function\";\nimport { GET_TOKEN_DATA } from \"../flow/get-token-data.script\";\nimport { CREATE_AUCTION } from \"../flow/create-auction.tx\";\nexport default function useUserNsfts(user) {\n  _s();\n\n  const [state, dispatch] = useReducer(userNsftReducer, {\n    loading: false,\n    error: false,\n    data: [],\n    txSstatus: {}\n  });\n  useEffect(() => {\n    if (!(user === null || user === void 0 ? void 0 : user.addr)) return;\n\n    const fetchUserMintedNsfts = async () => {\n      dispatch({\n        type: 'PROCESSING'\n      });\n\n      try {\n        let res = await query({\n          cadence: GET_TOKEN_DATA,\n          args: (arg, t) => [arg(user === null || user === void 0 ? void 0 : user.addr, t.Address)]\n        });\n        let minted_nsfts = res.filter(token => token.creatorAddress === (user === null || user === void 0 ? void 0 : user.addr));\n        dispatch({\n          type: 'SUCCESS',\n          payload: minted_nsfts\n        });\n      } catch (err) {\n        console.log(err);\n        dispatch({\n          type: 'ERROR'\n        });\n      }\n    };\n\n    fetchUserMintedNsfts(); //eslint-disable-next-line\n  }, [user]);\n\n  const addToAuction = async (nftid, price) => {\n    dispatch({\n      type: 'PROCESSING'\n    });\n\n    try {\n      let res = await mutate({\n        cadence: CREATE_AUCTION,\n        args: (arg, t) => [arg(nftid, t.UInt64), arg(price, t.UFix64)],\n        limit: 500\n      });\n      let txStatus = await tx(res).onceSealed();\n      dispatch({\n        type: 'TX_SUCCESS',\n        payload: txStatus\n      });\n      return txStatus;\n    } catch (err) {\n      console.log(err);\n      dispatch({\n        type: 'ERROR'\n      });\n    }\n  };\n\n  const mintNsft = async (cid, fileType, title, description, editionSize) => {\n    dispatch({\n      type: 'PROCESSING'\n    });\n\n    try {\n      let res = await mutate({\n        cadence: MINT_NSFT,\n        args: (arg, t) => [arg(user === null || user === void 0 ? void 0 : user.addr, t.Address), arg(cid, t.String), arg(fileType, t.UInt8), arg(title, t.String), arg(description, t.String), arg(editionSize, t.UInt16)],\n        limit: 500,\n        authz: authorizationFunction\n      }); //addTx(res)\n\n      let txStatus = await tx(res).onceSealed();\n      dispatch({\n        type: 'TX_SUCCESS',\n        payload: txStatus\n      });\n      return txStatus;\n    } catch (err) {\n      console.log(err);\n      dispatch({\n        type: 'ERROR'\n      });\n    }\n  };\n\n  return { ...state,\n    mintNsft,\n    addToAuction\n  };\n}\n\n_s(useUserNsfts, \"WmJjiSfc3xsmZQUWNNcEefXVfiQ=\");","map":{"version":3,"sources":["/Users/aidanhall/Desktop/nsft/client/src/hooks/use-user-nsfts.hook.js"],"names":["useEffect","useReducer","userNsftReducer","mutate","query","tx","MINT_NSFT","authorizationFunction","GET_TOKEN_DATA","CREATE_AUCTION","useUserNsfts","user","state","dispatch","loading","error","data","txSstatus","addr","fetchUserMintedNsfts","type","res","cadence","args","arg","t","Address","minted_nsfts","filter","token","creatorAddress","payload","err","console","log","addToAuction","nftid","price","UInt64","UFix64","limit","txStatus","onceSealed","mintNsft","cid","fileType","title","description","editionSize","String","UInt8","UInt16","authz"],"mappings":"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","sourcesContent":["import { useEffect, useReducer } from \"react\";\nimport { userNsftReducer } from \"../reducer/userNsftReducer\";\nimport { mutate, query, tx } from '@onflow/fcl';\nimport { MINT_NSFT } from \"../flow/mint-nsft.tx\";\nimport { authorizationFunction } from \"../services/authorization-function\";\nimport { GET_TOKEN_DATA } from \"../flow/get-token-data.script\";\nimport { CREATE_AUCTION } from \"../flow/create-auction.tx\";\n\nexport default function useUserNsfts(user) {\n    const [state, dispatch] = useReducer(userNsftReducer, {\n        loading: false,\n        error: false,\n        data: [],\n        txSstatus: {} \n    })\n\n    useEffect(() => {\n        if(!user?.addr) return\n        const fetchUserMintedNsfts = async () => {\n            dispatch({ type: 'PROCESSING' })\n            try {\n                let res = await query({\n                    cadence: GET_TOKEN_DATA,\n                    args: (arg, t) => [arg(user?.addr, t.Address)]\n                })\n                let minted_nsfts = res.filter(token => token.creatorAddress === user?.addr)\n                dispatch({ type: 'SUCCESS', payload: minted_nsfts })\n            } catch (err) {\n                console.log(err)\n                dispatch({ type: 'ERROR' })\n            }\n        }\n        fetchUserMintedNsfts()\n        //eslint-disable-next-line\n    }, [user])\n\n    const addToAuction = async (nftid, price) => {\n        dispatch({ type: 'PROCESSING' })\n        try {\n            let res = await mutate({\n                cadence: CREATE_AUCTION,\n                args: (arg, t) => [\n                    arg(nftid, t.UInt64),\n                    arg(price, t.UFix64)\n                ],\n                limit: 500\n            })\n            let txStatus = await tx(res).onceSealed()\n            dispatch({ type: 'TX_SUCCESS', payload: txStatus })\n            return txStatus\n        } catch(err) {\n            console.log(err)\n            dispatch({ type: 'ERROR' })\n        }\n    }\n\n    const mintNsft = async (cid, fileType, title, description, editionSize) => {\n        dispatch({ type: 'PROCESSING' })\n        try {\n            let res = await mutate({\n                cadence: MINT_NSFT,\n                args: (arg, t) => [\n                    arg(user?.addr, t.Address),\n                    arg(cid, t.String),\n                    arg(fileType, t.UInt8),\n                    arg(title, t.String),\n                    arg(description, t.String),\n                    arg(editionSize, t.UInt16),\n                  ],\n                  limit: 500,\n                  authz: authorizationFunction\n            })\n            //addTx(res)\n            let txStatus = await tx(res).onceSealed()\n            dispatch({ type: 'TX_SUCCESS', payload: txStatus })\n            return txStatus\n        } catch(err) {\n            console.log(err)\n            dispatch({ type: 'ERROR' })\n        }\n    }\n\n    return {\n        ...state,\n        mintNsft,\n        addToAuction\n    }\n}"]},"metadata":{},"sourceType":"module"}